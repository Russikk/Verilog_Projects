Опис:
● clk (clock): Годинниковий сигнал синхронізує всі операції в пристрої.
Він забезпечує регулярне оновлення станів і значень регістрів
відповідно до заданих інтервалів часу.
● rst (reset): Сигнал скидання ініціалізує всі регістри та змінні до
початкового стану. Це необхідно для початку роботи пристрою або його
перезапуску.
● text_char [3:0]: Вхідний числовий символ для кодування. Це 4-бітний
сигнал, який може приймати значення від 0 до 9.
● load: Сигнал завантаження ініціює початок передачі символу. Коли цей
сигнал активний, пристрій починає кодування і передачу символу.
● dash_length [2:0]: Параметр, що визначає довжину тире.
● dot_length [2:0]: Параметр, що визначає довжину точки.
● bit_pause_length [2:0]: Параметр, що визначає паузу між бітами.
Пам'ять кодів Морзе
Пам'ять кодів Морзе (рис 2.2) зберігає коди Морзе для числових
символів (0-9) та забезпечує доступ до коду Морзе для символу, який
надходить на вході пристрою.
Опис:
● morse_codes [5:0]: Масив, що зберігає коди Морзе для числових
символів.
Наприклад, morse_codes[0] = 5'b11111 для символу '0' (-----).
● current_code: Поточний код Морзе, що відповідає символу text_char.
Цей код завантажується з масиву morse_codes при активації сигналу
load.
Станова машина
Станова машина (рис 2.3) є основним блоком пристрою, вона керує
процесом передачі символів, визначаючи, коли передавати тире, точку або
паузи між ними
Опис:
● state [1:0]: Поточний стан станового автомата.
0: Передача сигналу (тире або точка).
1: Пауза між бітами.
2: Пауза між символами.
● counter [5:0]: Лічильник, що визначає поточну позицію в коді Морзе.
Він забезпечує проходження по кожному біту коду.
● counter_time [2:0]: Лічильник тривалості сигналу (тире або точка). Він
забезпечує правильну тривалість кожного елементу коду Морзе.
● symbol_pause_time [2:0]: Лічильник для пауз між символами. Він
забезпечує правильну тривалість паузи перед початком передачі нового
символу.
● one_bit: Поточний біт коду Морзе, який передається. Він визначає, чи
передавати тире (1) чи точку (0).
● transmitting: Прапор, що вказує на те, що передача символу активна.
Коли цей прапор встановлений, пристрій передає сигнал Морзе.
Вихідний модуль
Вихідний модуль (2.4) генерує кінцевий вихідний сигнал Морзе та
індикує завершення передачі символу, тобто формує сигнали тире, точки
та паузи, які відповідають коду Морзе для даного символу
Опис:
● morse_code: Вихідний сигнал Морзе. Значення 1 означає передачу
сигналу (тире або точка), значення 0 означає паузу.
● done: Сигнал завершення передачі символу. Коли цей сигнал активний,
передача символу завершена і пристрій готовий до передачі наступного
символу.
Також розглянемо опис роботи самого пристрою (додаток б).
Детальний опис роботи пристрою, першим кроком в роботі буде
ініціалізація:
При подачі сигналу rst всі регістри і змінні скидаються в початковий
стан: morse_code стає 0, counter, counter_time, symbol_pause_time
скидаються до нуля, state встановлюється в 0, done встановлюється в 1,
transmitting встановлюється в 0.
Після чого відбувається завантаження символу:
Коли активується сигнал load, пристрій перевіряє значення text_char.
Якщо воно в діапазоні від 0 до 9, то відповідний код Морзе завантажується
з масиву morse_codes у current_code. Всі лічильники і станова машина
встановлюються в початковий стан, done встановлюється в 0, transmitting
встановлюється в 1.
І в кінці переходимо для передача символу:
Під час активної передачі (transmitting = 1), станова машина починає
проходити по бітах current_code і передавати відповідні сигнали (тире або
точку) на вихід morse_code.
Також слід зазначити про стани роботи пристрою, їх 3, а саме:
● Стан 0 (Передача сигналу):
Якщо поточний біт one_bit є 1, передається тире (morse_code = 1)
протягом dash_length одиниць часу. Якщо поточний біт є 0,
передається точка (morse_code = 1) протягом dot_length одиниць
часу. Після завершення передачі сигналу, стан змінюється на 1 (пауза
між бітами).
● Стан 1 (Пауза між бітами):
Встановлюється пауза (morse_code = 0) протягом bit_pause_length
одиниць часу. Після завершення паузи, лічильник counter
збільшується на 1, і стан повертається на 0 для передачі наступного
біта.
● Стан 2 (Пауза між символами):
Після завершення передачі всіх бітів символу, встановлюється пауза
між символами (morse_code = 0). Після завершення паузи,
лічильники скидаються, done встановлюється в 1, transmitting
встановлюється в 0.
